webpackJsonp([6],{178:function(e,t,s){s(225);var o=s(67)(s(196),s(240),"data-v-18f6289e",null);e.exports=o.exports},196:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(69),n=s.n(o),a=s(68),r=s.n(a),i=s(203),c=s.n(i),l=(s(70),s(20)),m=s.n(l);t.default={data:function(){return{loginForm:{username:"",Access_Token:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},showLogin:!1}},mounted:function(){this.showLogin=!0,this.$store.state.username||(this.loginForm.username=this.getStore("username"),this.loginForm.Access_Token=this.getStore("Access_Token"),this.loginForm.username&&this.loginForm.Access_Token&&(this.$message({type:"success",message:"检测到您之前登录过，将自动登录"}),this.$store.dispatch("getAdminData",this.loginForm),this.$router.push("manage")))},methods:{setStore:function(e,t){e&&("string"!=typeof t&&(t=c()(t)),window.localStorage.setItem(e,t))},getStore:function(e){if(e)return window.localStorage.getItem(e)},login:function(e){if(e===this.loginForm.username){this.$message({type:"success",message:"登录成功"}),this.$store.dispatch("getAdminData",this.loginForm);try{this.setStore("username",this.loginForm.username),this.setStore("Access_Token",this.loginForm.Access_Token)}catch(e){console.log(e)}this.$router.push("manage")}else this.$message({type:"error",message:"username和Access_Token不一致"})},submitForm:function(e){var t=this;return r()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.$refs[e].validate(function(){var e=r()(n.a.mark(function e(s){var o,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=13;break}return o={accesstoken:t.loginForm.Access_Token},e.prev=2,e.next=5,m.a.post("https://cnodejs.org/api/v1/accesstoken",o);case 5:a=e.sent,console.log(a),t.login(a.data.loginname),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,t,[[2,10]])}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return s.stop()}},s,t)}))()}}}},203:function(e,t,s){e.exports={default:s(206),__esModule:!0}},206:function(e,t,s){var o=s(10),n=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},210:function(e,t,s){t=e.exports=s(172)(!1),t.push([e.i,".allcover[data-v-18f6289e]{position:absolute;top:0;right:0}.ctt[data-v-18f6289e]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tb[data-v-18f6289e]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.lr[data-v-18f6289e]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.login_page[data-v-18f6289e]{background-color:#324057}.manage_tip[data-v-18f6289e]{position:absolute;width:100%;top:-100px;left:0}.manage_tip p[data-v-18f6289e]{font-size:34px;color:#fff}.form_contianer[data-v-18f6289e]{width:320px;height:210px;position:absolute;top:50%;left:50%;margin-top:-105px;margin-left:-160px;padding:25px;border-radius:5px;text-align:center;background-color:#fff}.form_contianer .submit_btn[data-v-18f6289e]{width:100%;font-size:16px}.tip[data-v-18f6289e]{font-size:12px;color:red}.form-fade-enter-active[data-v-18f6289e],.form-fade-leave-active[data-v-18f6289e]{transition:all 1s}.form-fade-enter[data-v-18f6289e],.form-fade-leave-active[data-v-18f6289e]{-webkit-transform:translate3d(0,-50px,0);transform:translate3d(0,-50px,0);opacity:0}",""])},225:function(e,t,s){var o=s(210);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(173)("297175d4",o,!0)},240:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_page fillcontain"},[s("transition",{attrs:{name:"form-fade",mode:"in-out"}},[s("section",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}],staticClass:"form_contianer"},[s("div",{staticClass:"manage_tip"},[s("p",[e._v("Cnode社区")])]),e._v(" "),s("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.loginForm.username=t},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"Access_Token"}},[s("el-input",{attrs:{type:"password",placeholder:"Access Token"},model:{value:e.loginForm.Access_Token,callback:function(t){e.loginForm.Access_Token=t},expression:"loginForm.Access_Token"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"submit_btn",attrs:{type:"primary"},on:{click:function(t){e.submitForm("loginForm")}}},[e._v("登陆")])],1)],1),e._v(" "),s("p",{staticClass:"tip"},[e._v("温馨提示：")]),e._v(" "),s("p",{staticClass:"tip"},[e._v("注册过的用户可凭账号和Access Token登录")]),e._v(" "),s("p",{staticClass:"tip"},[e._v("登录过的用户，自动登陆")])],1)])],1)},staticRenderFns:[]}}});